// TODO: remove or check if is used
.header-color {
  background-color: var(--header--nav-background);
}

#masthead {
  position: fixed;
  z-index: 1000;
  top: 0;
  width: 100%;
  transition: $animations__lenght;
  color: var(--header--text-color);
  
  @media #{$mq__responsive_breakpoint} {
    height: var(--header--branding--height);
    transform: inherit !important;
    padding: 0;
  }

  // UTILS && ANIMATIONS
  // if the page was scrolled shows a shadow under the header
  .scrolled & {
    box-shadow: 0 3px 10px -5px rgba( var(--wp--preset--color--black--decimal), .7);
    @media #{$mq__responsive_breakpoint} {
      transform: inherit !important;
    }
  }

  // hides the logo in portrait header when the page is scrolled
  .scrolled &.header-portrait  { transform: translateY( calc( var(--header--branding--height) * -1 ) ); }

  // the background image
  .site-header-image {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
  }

  .show-on-mobile {
    display: none;
    @media #{$mq__responsive_breakpoint} {
      display: block;
    }
  }

  %header-top-right-position {
    position: absolute;
    top: 0;
    right: var(--sizes--responsive--side-margin);
    height: 100%;
    @media #{$mq__responsive_breakpoint} {
      display: flex;
      justify-content: center;
      align-content: center;
    }
  }

  // the menu icons near the hamburger
  .menu-resp {
    @extend %header-top-right-position;
    z-index: 1030;
  }

  // the menu icons near the hamburger
  .menu-icons-container {
    $icons-height: 20px;

    @extend %header-top-right-position;
    z-index: 1010;
    right: var(--sizes--margin-m) + $hamburger__size ;

    .button {
      min-width: $icons-height;
      margin: auto 0 auto var(--sizes--margin--);
      padding: var(--sizes--margin-m);

      border-radius: $icons-height + var(--sizes--margin-s);
      border: 1.5px solid var(--wp--preset--color--gray-light);

      opacity: 0.75;
      transition: $animations__lenght;

      &.text {
        padding: ($size__margin * 1.25) var(--sizes--margin-m);
      }

      &:hover {
        opacity: 1;
      }

      span {
        display: block;
        font-size: var(--typography--default--font-size--s);
        height: $icons-height;
        line-height: $icons-height + 2;
      }

      i {
        font-size: $icons-height;
        line-height: $icons-height;
        vertical-align: middle;
      }
    }
  }

  // Logo/site title container
  .header-wrapper {
    display: flex;
    margin-top: 0;
    margin-bottom: 0;

    @media #{$mq__responsive-size_breakpoint} {height: 100%;}

    .site-branding {
      align-items: flex-start;
      height: var(--header--branding--height);

      @media #{$mq__responsive-size_breakpoint} {
        text-align: left;
        padding-right: $hamburger__size * 2;
        justify-content: flex-start !important;
      }

      // Custom logo
      .custom-logo-link {
        display: flex;
        height: 100%;
        align-items: center;

        .custom-logo {
          object-fit: contain;
          height: var(--header--logo--height);
          width: auto;
          max-width: var(--header--branding--max-width);

          @media #{$mq__responsive-size_breakpoint} {
            max-height: calc(var(--header--branding--height) - var(--sizes--margin-m));
            width: auto;
            margin: 0;
          }
        }
      }

      .site-logo {
        height: var(--header--branding--height);
      }

      &.has-header-text.has-custom-logo {
        display: flex;
        flex-direction: row;
        align-items: center;

        .site-logo {
          margin-right: var(--sizes--margin--);

          @media #{$mq__responsive-size_breakpoint} {
            width: auto;
          }
        }
        .custom-logo {object-position: right;}

        .header-text {
          text-align: left;
          margin-left: var(--sizes--margin--);
        }
      }
    }

    // Site title & description (no custom logo)
    .header-text {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;

      .site-title a {
        color: var(--header--title-color);
      }

      .site-title,
      .site-description {
        margin: 0;
        white-space: nowrap;
      }

      .site-description {
        display: inline-block;
        font-weight: var(--typography--default--font-weight--light);
        color: var(--header--text-color);
      }
    }

  }


  //  PORTRAIT
  &.header-portrait .header-wrapper {

    flex-direction: column;
    @media #{$mq__responsive-size_breakpoint} {
      justify-content: center;
    }

    .site-branding {
      @media #{$mq__responsive-size_breakpoint} {
        padding-top: 0;
      }

      .header-text {
        text-align: center;
        margin-right: auto;
        padding-top: var(--sizes--margin--);
        padding-bottom: var(--sizes--margin--);

        @media #{$mq__responsive_breakpoint} {
          text-align: left;
          padding-top: 0;
          padding-bottom: 0;
        }

        .site-title {
          font-size: calc( var(--header--branding--height) * .4 );
          line-height: 1;
        }

        .site-description {
          font-size: calc( var(--header--branding--height) * .2 );
          line-height: 1;
        }
      }

      &.has-header-text.has-custom-logo {
        justify-content: center;
        margin-right: 0;
      }
    }

    .main-navigation {
      ul {
        height: auto;
      }
    }

    .site-logo {
      margin-left: auto;
      .custom-logo {
        margin-left: auto;
        margin-right: auto;
        @media #{$mq__responsive-size_breakpoint} {
          margin-right: 0;
          margin-left: 0;
        }
      }
    }

  }
  
  
  // LANDSCAPE
  &.header-landscape .header-wrapper {
    flex-direction: row;
    height: var(--header--nav--height);
    @media #{$mq__responsive_breakpoint} {
      height: 100%;
    }
    
    .site-branding {
      padding-top: 0;
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      @media #{$mq__responsive_breakpoint} {
        padding-top: var(--sizes--margin-xs);
        padding-bottom: var(--sizes--margin-xs);
      }
  
      .site-logo {
        height: 100%;
        margin-left: 0;
        width: auto;
      }
      
      .custom-logo {
        object-position: left;
        width: auto;
        height: var(--header--logo--height);
        @media #{$mq__responsive_breakpoint} {
          max-width: 100%;
        }
      }
  
      .header-text {
        .site-title {
          font-size: calc(var(--header--nav--height) * .3);
          line-height: 1;
        }

        .site-description {
          display: inline-block;
          font-weight: var(--typography--default--font-weight--light);
          font-size: calc(var(--header--nav--height) * .2);
          line-height: 1;
        }
      }
    }

    .main-navigation {
      align-self: flex-end;
      width: 100%;
      
      ul {
        justify-content: flex-end;
      }
      
      li a {
        line-height: var(--header--nav--height);
        @media #{$mq__responsive_breakpoint} {
          line-height: $size__nav-responsive-line-height;
          height: auto;
        }
      }
    }
    
    .main-menu {
      justify-content: flex-end;
      padding: 0 0 0 var(--sizes--responsive--side-margin);
      @media #{$mq__responsive_breakpoint} {
        padding: 0;
        justify-content: flex-start;
      }
    }
    
  }
 
}


// the wordpress admin bar fix
@media screen and (max-width: 600px) {
 body.logged-in > div:last-child {position: fixed !important;}
}

.admin-bar #masthead {
  top: 32px;
  @media screen and (max-width: 782px) { top: 46px; }
}